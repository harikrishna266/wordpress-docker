#!/bin/sh
# Prevent pushing directly to the main branch
protected_branch="main"

while read local_ref local_sha remote_ref remote_sha; do
    if [ "$remote_ref" = "refs/heads/$protected_branch" ]; then
        echo "Error: Pushing directly to the '$protected_branch' branch is not allowed."
        exit 1
    fi
done

# If not pushing to the main branch, allow the push to proceed
exit 0